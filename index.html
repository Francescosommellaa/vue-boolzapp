<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoolZapp</title>

    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/32508bc627.js" crossorigin="anonymous"></script>

    <!-- vue -->
    <script src="https://unpkg.com/vue@3"></script>

    <!-- css -->
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    
    <!-- background green -->
    <div id="green-banner">
    </div>

    <!-- container app -->
     <div id="app" class="container">

        <!-- parte sinistra container  -->
        <div class="left-c">

            <div class="c-zone">
                <!-- profilo e nome -->
                <div class="flex-item">
                    <img class="cerchio" src="https://th.bing.com/th/id/R.c11b6f38dffc24a4508217513b0e50bd?rik=Pt%2bkITlukiMkWg&riu=http%3a%2f%2fwww.emmegi.co.uk%2fwp-content%2fuploads%2f2019%2f01%2fUser-Icon.jpg&ehk=zjS04fF4nxx%2bpkvRPsSezyic3Z7Yfu%2fuoT75KnbNv1Y%3d&risl=&pid=ImgRaw&r=0" alt="profilo">
                    <h4>Francesco</h4>
                </div>
                <div class="flex-item">
                    <i class="fa-regular fa-circle"></i>
                    <i class="fa-regular fa-message"></i>
                    <i class="fa-solid fa-ellipsis-vertical"></i>
                </div>
            </div>

            <div class="c-zone not-option">

            </div>

            <div class="chat-c">

                <div class="input-container">
                    <!-- input per la ricerca -->
                    <input class="search-input" v-model="searchQuery" placeholder="Cerca">
                </div>

                <!-- Contatti -->
                <div v-for="contact in contacts" :key="contact.name"@click="setActiveContact(contact)" :class="{ 'active-chat': contact === activeContact }">
                    <div class="container-contact">
                        <img class="cerchio" :src="contact.avatar" alt="Avatar">
                        <div>
                            <h4>{{ contact.name }}</h4>
                            <p class="last-message">{{getPreviewMessage(contact)}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         
        <!-- parte destra container  -->
        <div class="right-c">
            <div class="user-chat">
                <!--Profilo Chat attiva  -->
            </div>

            <!-- chat -->
            <div class="chat" v-if="activeContact != null">
                <div v-for="(message, index) in activeContact.messages" :key="message.date" :class="['message', message.status]" @click="openContextMenu($event, index)" ref="messages">
                    <p>{{ message.message }}</p>
                    <div class="context-menu" :class="{ active: contextMenuIndex === index }" :style="{ top: contextMenuY + 'px', left: contextMenuX + 'px' }">
                      <ul>
                        <li @click="showInfo(index)">Info</li>
                        <li @click="deleteMessage(index)">Cancella</li>
                      </ul>
                    </div>
                </div>
            </div>


            <div class="text-c" v-if="activeContact != null">
                <!-- input per i messaggi -->
                <input v-model="newMessage" @keyup.enter="sendMessage">
            </div>
        </div>

     </div>



    <!-- luxon -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>

    <!-- js -->
    <script src="js/main.js"></script>
</body>

</html>